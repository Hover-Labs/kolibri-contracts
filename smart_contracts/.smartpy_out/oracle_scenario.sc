[{"shortname": "getXtzUsdRate_-_fails_when_called_from_bad_state", "longname": "getXtzUsdRate - fails when called from bad state", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 1) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 164, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 1, "export": "(storage (record 12 (intValue (literal (int 0) 10)) (natValue (literal (nat 0) 9)))\nstorage_type (())\nmessages ((default True ()) (intCallback True ((set (attr (data) \"intValue\" 30) (params 29) 30))) (natCallback True ((set (attr (data) \"natValue\" 25) (params 24) 25))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 168, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate", "params": "(openVariant (contract \"natCallback\" \"nat\" (literal (local-address 1) 12) 171) \"Some\" \"None\" 171)", "line_no": 172, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 172)", "show": true, "valid": "(literal (bool False) 172)", "voting_powers": "(map 172 )"}]}, {"shortname": "getXtzUsdRate_-_fails_when_called_with_an_amount", "longname": "getXtzUsdRate - fails when called with an amount", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 183, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 1, "export": "(storage (record 12 (intValue (literal (int 0) 10)) (natValue (literal (nat 0) 9)))\nstorage_type (())\nmessages ((default True ()) (intCallback True ((set (attr (data) \"intValue\" 30) (params 29) 30))) (natCallback True ((set (attr (data) \"natValue\" 25) (params 24) 25))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 187, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate", "params": "(openVariant (contract \"natCallback\" \"nat\" (literal (local-address 1) 12) 190) \"Some\" \"None\" 190)", "line_no": 191, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 1) 192)", "level": "(literal (intOrNat 0) 191)", "show": true, "valid": "(literal (bool False) 191)", "voting_powers": "(map 191 )"}]}, {"shortname": "getXtzUsdRate_-_retrieves_correct_value", "longname": "getXtzUsdRate - retrieves correct value", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 13 (harbingerAsset (literal (string \"XTZ-USD\") 13)) (harbingerUpdateTime (literal (timestamp 1632869466) 204)) (harbingerValue (literal (intOrNat 2310000) 13)))\nstorage_type (())\nmessages ((get True ((set_type (params 31) (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) 32) (set (operations 37) (cons (transfer (tuple 37 (attr (data) \"harbingerAsset\" 36) (tuple 37 (attr (data) \"harbingerUpdateTime\" 36) (attr (data) \"harbingerValue\" 36))) (literal (mutez 0) 37) (second (params 31) 34) 37) (operations 37) 37) 37))) (setNewPrice True ((set (attr (data) \"harbingerValue\" 36) (params 21) 22))) (update True ()))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 207, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 1, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (local-address 0) 13)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 213, "show": true, "accept_unknown_types": false}, {"action": "newContract", "id": 2, "export": "(storage (record 12 (intValue (literal (int 0) 10)) (natValue (literal (nat 0) 9)))\nstorage_type (())\nmessages ((default True ()) (intCallback True ((set (attr (data) \"intValue\" 30) (params 29) 30))) (natCallback True ((set (attr (data) \"natValue\" 25) (params 24) 25))))\nflags ()\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 217, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 1, "message": "getXtzUsdRate", "params": "(openVariant (contract \"natCallback\" \"nat\" (literal (local-address 2) 12) 220) \"Some\" \"None\" 220)", "line_no": 221, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 1632869467) 222)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 221)", "show": true, "valid": "(literal (bool True) 221)", "voting_powers": "(map 221 )"}, {"action": "verify", "condition": "(eq (attr (contractData 2 217) \"natValue\" 227) (literal (intOrNat 2310000000000000000) 227) 227)", "line_no": 227}, {"action": "verify", "condition": "(eq (attr (contractData 1 221) \"state\" 230) (literal (intOrNat 0) 230) 230)", "line_no": 230}, {"action": "verify", "condition": "(eq (isVariant (attr (contractData 1 221) \"clientCallback\" 231) \"Some\" 231) (literal (bool False) 231) 231)", "line_no": 231}]}, {"shortname": "getXtzUsdRate_callback_-_fails_when_called_from_bad_state", "longname": "getXtzUsdRate_callback - fails when called from bad state", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 247, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate_callback", "params": "(tuple 251 (literal (string \"XTZ-USD\") 251) (tuple 251 (literal (timestamp 1632869468) 250) (literal (intOrNat 2310000) 251)))", "line_no": 251, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 251)", "show": true, "valid": "(literal (bool False) 251)", "voting_powers": "(map 251 )"}]}, {"shortname": "getXtzUsdRate_callback_-_fails_when_not_called_from_harbinger", "longname": "getXtzUsdRate_callback - fails when not called from harbinger", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 1) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 265, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate_callback", "params": "(tuple 270 (literal (string \"XTZ-USD\") 270) (tuple 270 (literal (timestamp 1632869468) 268) (literal (intOrNat 2310000) 270)))", "line_no": 270, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 54)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 270)", "show": true, "valid": "(literal (bool False) 270)", "voting_powers": "(map 270 )"}]}, {"shortname": "getXtzUsdRate_callback_-_fails_when_called_with_wrong_asset", "longname": "getXtzUsdRate_callback - fails when called with wrong asset", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 1) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 285, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate_callback", "params": "(tuple 289 (literal (string \"BTC-USD\") 289) (tuple 289 (literal (timestamp 1632869469) 288) (literal (intOrNat 2310000) 289)))", "line_no": 289, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 289)", "show": true, "valid": "(literal (bool False) 289)", "voting_powers": "(map 289 )"}]}, {"shortname": "getXtzUsdRate_callback_-_fails_when_called_with_stale_asset_data", "longname": "getXtzUsdRate_callback - fails when called with stale asset data", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (intOrNat 30) 34)) (state (literal (intOrNat 1) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 306, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "getXtzUsdRate_callback", "params": "(tuple 314 (literal (string \"XTZ-USD\") 314) (tuple 314 (literal (timestamp 29) 311) (literal (intOrNat 2310000) 314)))", "line_no": 314, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)", "chain_id": "", "time": "(literal (timestamp 60) 310)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 314)", "show": true, "valid": "(literal (bool False) 314)", "voting_powers": "(map 314 )"}]}, {"shortname": "default_-_fails_with_calls_to_the_default_entrypoint", "longname": "default - fails with calls to the default entrypoint", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 330, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "default", "params": "(unit)", "line_no": 333, "title": "", "messageClass": "", "source": "none", "sender": "none", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 1) 334)", "level": "(literal (intOrNat 0) 333)", "show": true, "valid": "(literal (bool False) 333)", "voting_powers": "(map 333 )"}]}, {"shortname": "setMaxDataDelaySec_-_succeeds_when_called_by_governor", "longname": "setMaxDataDelaySec - succeeds when called by governor", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (intOrNat 30) 34)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 352, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "setMaxDataDelaySec", "params": "(literal (intOrNat 60) 356)", "line_no": 356, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 356)", "show": true, "valid": "(literal (bool True) 356)", "voting_powers": "(map 356 )"}, {"action": "verify", "condition": "(eq (attr (contractData 0 356) \"maxDataDelaySec\" 361) (literal (intOrNat 60) 361) 361)", "line_no": 361}]}, {"shortname": "setMaxDataDelaySec_-_fails_when_not_called_by_governor", "longname": "setMaxDataDelaySec - fails when not called by governor", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 372, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "setMaxDataDelaySec", "params": "(literal (intOrNat 60) 376)", "line_no": 376, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 54)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 376)", "show": true, "valid": "(literal (bool False) 376)", "voting_powers": "(map 376 )"}]}, {"shortname": "setGovernorContract_-_succeeds_when_called_by_governor", "longname": "setGovernorContract - succeeds when called by governor", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 394, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "setGovernorContract", "params": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 48)", "line_no": 398, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 398)", "show": true, "valid": "(literal (bool True) 398)", "voting_powers": "(map 398 )"}, {"action": "verify", "condition": "(eq (attr (contractData 0 398) \"governorContractAddress\" 403) (literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 48) 403)", "line_no": 403}]}, {"shortname": "setGovernorContract_-_fails_when_not_called_by_governor", "longname": "setGovernorContract - fails when not called by governor", "scenario": [{"action": "newContract", "id": 0, "export": "(storage (record 34 (clientCallback (variant \"None\" (unit) -1)) (governorContractAddress (literal (address \"tz1abmz7jiCV2GH2u81LRrGgAFFgvQgiDiaf\") 6)) (harbingerContractAddress (literal (address \"tz1TDSmoZXwVevLTEvKCTHWpomG76oC9S2fJ\") 36)) (maxDataDelaySec (literal (nat 1800) 29)) (state (literal (intOrNat 0) 34)))\nstorage_type (())\nmessages ((default True ((set_type (params 48) \"unit\" 49) (failwith (literal (intOrNat 19) 50) 50))) (getXtzUsdRate True ((set_type (params 57) (contract \"nat\") 58) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 0) 61) 61) False (literal (intOrNat 12) 61) 61) (verify (eq (amount) (literal (mutez 0) 64) 64) False (literal (intOrNat 15) 64) 64) (set (attr (data) \"state\" 61) (literal (intOrNat 1) 67) 67) (set (attr (data) \"clientCallback\" 68) (variant \"Some\" (to_address (params 57) 68) 68) 68) (set_type (self_entry_point \"getXtzUsdRate_callback\" 71) (contract (tuple \"string\" (tuple \"timestamp\" \"nat\"))) 72) (set (operations 81) (cons (transfer (tuple 81 (literal (string \"XTZ-USD\") 81) (self_entry_point \"getXtzUsdRate_callback\" 71)) (literal (mutez 0) 81) (openVariant (contract \"get\" (tuple \"string\" (contract (tuple \"string\" (tuple \"timestamp\" \"nat\")))) (attr (data) \"harbingerContractAddress\" 77) 75) \"Some\" \"None\" 75) 81) (operations 81) 81) 81))) (getXtzUsdRate_callback True ((set_type (params 88) (tuple \"string\" (tuple \"timestamp\" \"nat\")) 89) (verify (eq (attr (data) \"state\" 61) (literal (intOrNat 1) 92) 92) False (literal (intOrNat 12) 92) 92) (verify (eq (sender) (attr (data) \"harbingerContractAddress\" 77) 95) False (literal (intOrNat 3) 95) 95) (verify (eq (first (params 88) 96) (literal (string \"XTZ-USD\") 97) 97) False (literal (intOrNat 14) 97) 97) (verify (lt (openVariant (isNat (sub (now) (first (second (params 88) 100) 100) 100) 100) \"Some\" \"None\" 100) (attr (data) \"maxDataDelaySec\" 101) 101) False (literal (intOrNat 17) 101) 101) (set (operations 114) (cons (transfer (mul (second (second (params 88) 111) 111) (literal (intOrNat 1000000000000) 111) 111) (literal (mutez 0) 114) (openVariant (contract \"\" \"nat\" (openVariant (attr (data) \"clientCallback\" 68) \"Some\" \"None\" 104) 105) \"Some\" \"None\" 105) 114) (operations 114) 114) 114) (set (attr (data) \"state\" 61) (literal (intOrNat 0) 117) 117) (set (attr (data) \"clientCallback\" 68) (variant \"None\" (unit) -1) 118))) (setGovernorContract True ((set_type (params 126) \"address\" 127) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 129) False (literal (intOrNat 4) 129) 129) (set (attr (data) \"governorContractAddress\" 129) (params 126) 130))) (setMaxDataDelaySec True ((set_type (params 134) \"nat\" 135) (verify (eq (sender) (attr (data) \"governorContractAddress\" 129) 137) False (literal (intOrNat 4) 137) 137) (set (attr (data) \"maxDataDelaySec\" 101) (params 134) 138))))\nflags (Exception_DefaultUnit)\nglobals ()\nviews ()\nentry_points_layout ()\ninitial_metadata ()\nbalance ())", "line_no": 414, "show": true, "accept_unknown_types": false}, {"action": "message", "id": 0, "message": "setGovernorContract", "params": "(literal (address \"tz1UMCB2AHSTwG7YcGNr31CqYCtGN873royv\") 48)", "line_no": 418, "title": "", "messageClass": "", "source": "none", "sender": "(literal (address \"tz1bTpviNnyx2PXsNmGpCQTMQsGoYordkUoA\") 54)", "chain_id": "", "time": "(literal (timestamp 0) 34)", "amount": "(literal (mutez 0) 1)", "level": "(literal (intOrNat 0) 418)", "show": true, "valid": "(literal (bool False) 418)", "voting_powers": "(map 418 )"}]}]